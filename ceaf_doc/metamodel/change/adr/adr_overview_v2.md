## Управление архитектурными изменениями

### Что такое ADR и ADL

В классическом варианте для управления различными архитектурными решениями используется специальный документ, который называется **Architecture Decision Record (ADR)**.

ADR — это документ, который фиксирует важное архитектурное решение, принятое в контексте разработки, вместе с его мотивами, последствиями и альтернативами. Например, в ходе разработки программного обеспечения может возникать потребность в фиксировании принятых решений, касающихся дизайна, проектирования, выбора инструментов и подходов, которые отвечают как функциональным, так и нефункциональным требованиям (например, производительности, масштабируемости или безопасности).

ADR обычно включает в себя несколько ключевых элементов:

- **Контекст**: обоснование, почему было необходимо принять решение.  
- **Решение**: описание того, что было выбрано и как это решает текущую проблему.  
- **Причины выбора**: мотивация принятого решения.  
- **Альтернативы**: рассмотренные, но отклонённые варианты.  
- **Последствия**: как выбранное решение повлияет на проект.  

Для управления и отслеживания ADR используется **Architecture Decision Log (ADL)**.

ADL — это журнал, в котором фиксируются все важные архитектурные решения, принятые в процессе разработки программного обеспечения. Он служит для систематической записи, отслеживания и анализа этих решений на протяжении всего жизненного цикла проекта. Основное предназначение ADL — предоставить историческую информацию о том, как и почему были приняты те или иные архитектурные решения, а также помочь в принятии обоснованных решений в будущем.

ADL помогает:

- **Обеспечить прозрачность**: позволяет всем членам команды (в том числе новым участникам) легко понять, какие решения были приняты и почему.  
- **Отслеживать изменения**: ведение журнала позволяет отслеживать эволюцию архитектуры проекта.  
- **Управлять рисками**: анализ принятия решений и их последствий помогает вовремя выявить потенциальные проблемы.  
- **Сохранять знания**: обеспечивается документирование процессов принятия решений, что может быть полезно в будущем для разработки и поддержки системы.  

Вместе ADR и ADL помогают создать структуру для принятия и отслеживания архитектурных решений, обеспечивая прозрачность, историческую последовательность и повышение качества проектирования системы.

### Использование ADR в CEAF
В ходе нашего анализа процесса внедрения изменений в CAEF мы рассмотрели разные отраслевые практики управления изменениями в т.ч. мы детально рассмотрели вариант внедрения изменений через ADR. В рамках анализа мы выявили следующие недостатки ADR:
- Контекст рассматривается слишком узко. Для успешного внедрения изменений недостаточно определить проблему, необходимо вывить реальную мотивацию изменений.
- При принятии решений мы зачастую не понимаем критерии приемки ожидаемого результата и что на него реально может повлиять.
- Архитектурное решение описывается только с точки зрения технической реализации, без понимания, того что реально необходимо для проведения таких изменений и как в конце будет выглядеть результат.
- Последствия решения оцениваются обычно в "лоб" без понимания всех аспектов возможных последствий
- Вопрос контроля исполнений ADR упущен из процесса, а это значит, что для того чтобы понять было ли наше решение успешным и сделать анализ успехов и неудач нам нужны другие инструменты и процессы.

С одной стороны мы хотим говорить на языке архитекторов, но с другой стороны нам нужно больше информации для управления изменениями, поэтому за основу мы взяли ADR и расширяем его.

Для того чтобы не создавать путаницы в отрасли мы решили назвать свой "документ" управления изменениями:
**TDC** - Transformation Decision Record.

В **CEAF** мы рассматриваем TDC гораздо шире, чем просто средство для фиксации ключевых архитектурных решений при возникновении различных архитектурных развилок. В рамках CEAF мы не только фиксируем важные решения, но и полностью управляем процессом изменений на всех этапах — от идеи до эксплуатации.

Этот подход позволяет нам интегрировать управление архитектурными решениями в единую, непрерывную и целостную систему, что способствует лучшему контролю над процессом изменений и минимизирует риски. В результате мы получаем возможность управлять архитектурой в долгосрочной перспективе, поддерживая её гибкость и соответствие меняющимся бизнес-требованиям и техническим условиям.

А самое главное мы начинаем накапливать и управлять нашими знаниями и компетенциями, что приводит нас к новой эре **управления знаниями**.

Использование TDC в CEAF также позволяет существенно сократить количество и сложность документации. Вместо множества разрозненных документов, таких как:

- **Бизнес-требования (БТ)**,  
- **Тактическая архитектура (ТАР)**,  
- **Техническое задание (ТЗ)**,  
- **Частное техническое задание (ЧТЗ)**

и других документов, традиционно используемых в ИТ-индустрии, мы можем сосредоточиться на одном логичном и последовательном процессе управления архитектурными решениями. Это обеспечивает прозрачность, согласованность и поддержку всех заинтересованных сторон.

В результате такого подхода использование TDC в рамках CEAF способствует:  

- **Снижению сложности для увеличение скорости принятия решений, повышения качества и уменьшение дублирования документов - исключает противоречия документов**
- **Исключение параллельных процессов ведущих к противоречиям в реализации**  
- **Сокращение издержек на управление процессами изменений**
- **Своевременное и достоверная информация для оценки текущего состояния в любой момент времени, что позволяет нам очень быстро изменяться**

### Концептуальная схема управления изменениями

!!! Сделать модель в yaml
![Концептуальная схема управления изменениями](@document/ceaf.adr.scheme.conceptual)

### Методология управления ADR

В данной методологии работы с ADR предполагается, что для каждого изменения должен быть сделан отдельный ADR. Если в процессе реализации изменений возникают различные развилки в т.ч. архитектурные, которые требуют проработки, то необходимо создавать новый ADR связанный с основным. При этом ADR, описанные варианты которых не подходят по каким-либо причинам,закрываются со статусом "Отклонён" (rejected). Для ADR в котором описан подходящий вариант устанавливается статус "Принят" (accepted) и все рассмотренные, но отклоненные варианты, должны быть указаны ссылками в разделе "Рассмотренные варианты".

#### Статусы ADR и их описание

Любой ADR имеет статусную модель описанную ниже:

1. **Черновик (Draft)**
   - **Описание**: Этот статус присваивается **ADR** на момент его первоначального создания. Когда архитектурное решение только начинает формироваться, оно находится на стадии черновика и ещё не прошло проверку или согласование. На этом этапе решение может быть в процессе разработки и обсуждения.

2. **Предложен (Proposed)**
   - **Описание**: Этот статус присваивается **ADR**, когда решение готово и передано на проверку. На стадии «Предложено» **ADR** подлежит анализу и обсуждению другими участниками команды или заинтересованными сторонами. Это момент, когда решение ещё не окончательно, но уже предлагается для утверждения.

3. **Принят (Accepted)**
   - **Описание**: Этот статус присваивается **ADR**, когда оно прошло проверку и его корректность была подтверждена всеми заинтересованными лицами. После того как решение было тщательно рассмотрено и одобрено, оно получает статус «Принято». Это означает, что архитектурное решение официально утверждено и будет применяться в проекте.

4. **Отклонён (Rejected)**
   - **Описание**: Этот статус присваивается **ADR**, когда оно было проверено, но отклонено по различным причинам. Возможные причины отклонения могут включать несоответствие требованиям, недостаточную проработанность или невозможность реализации в рамках текущей архитектуры проекта. Статус «Отклонено» означает, что данное решение не будет использовано, и требуется пересмотр альтернатив.

---

#### Документация по статусам ADR:

##### 1. Черновик (Draft)
   - **Когда применяется**: На этапе первоначального создания ADR, когда решение ещё не окончательно и подлежит доработке.
   - **Цель**: Сбор всех необходимых идей, подходов и предварительных обсуждений для дальнейшего анализа и уточнения.
   - **Действия**: Создание начальной версии документа, описание контекста, проблем и предварительных решений.

##### 2. Предложен (Proposed)
   - **Когда применяется**: Когда решение готово для проверки и обсуждения.
   - **Цель**: Принести решение на проверку и получить обратную связь от команды или заинтересованных сторон.
   - **Действия**: Передача документа на проверку, сбор замечаний и предложений, возможные корректировки.

##### 3. Принят (Accepted)
   - **Когда применяется**: Когда решение было проверено и подтверждено как корректное и соответствующее требованиям.
   - **Цель**: Заключительная стадия, когда решение утверждается для использования и внедрения в проект.
   - **Действия**: Утверждение решения и его интеграция в архитектуру проекта, дальнейшее использование в процессе разработки.

##### 4. Отклонён (Rejected)
   - **Когда применяется**: Когда решение было проверено, но отклонено по каким-либо причинам.
   - **Цель**: Ясно зафиксировать, что это решение не подходит и не будет использоваться.
   - **Действия**: Документирование причин отклонения, возможность для доработки или поиска альтернативного решения.


