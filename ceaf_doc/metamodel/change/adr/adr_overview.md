## Управление архитектурными изменениями

### Что такое ADR и ADL

В классическом варианте для управления архитектурными решениями используется специальный документ, называемый **Architecture Decision Record (ADR)**.

**ADR** — это документ, фиксирующий важное архитектурное решение, принятое в контексте разработки, вместе с его мотивами, последствиями и альтернативами. Например, в процессе разработки программного обеспечения возникает необходимость фиксировать решения, связанные с дизайном, проектированием, выбором инструментов и подходов, которые отвечают как функциональным, так и нефункциональным требованиям (например, производительности, масштабируемости или безопасности).

**ADR** обычно включает несколько ключевых элементов:

- **Контекст**: обоснование необходимости принятия решения.  
- **Решение**: описание выбранного варианта и его роли в решении текущей проблемы.  
- **Причины выбора**: причина принятого решения.  
- **Альтернативы**: рассмотренные, но отклонённые варианты.  
- **Последствия**: последствия принятого решения.  

Для управления и отслеживания ADR используется **Architecture Decision Log (ADL)**.

**ADL** — это журнал, в котором фиксируются все важные архитектурные решения, принятые в процессе разработки программного обеспечения. Он позволяет систематически записывать, отслеживать и анализировать эти решения на протяжении жизненного цикла проекта. Основная цель ADL — предоставить историческую информацию о том, как и почему принимались те или иные архитектурные решения, а также помочь в принятии обоснованных решений в будущем.

**ADL** помогает:

- **Обеспечить прозрачность**: позволяет всем членам команды, включая новых участников, понять, какие решения были приняты и почему.  
- **Отслеживать изменения**: ведение журнала фиксирует эволюцию архитектуры проекта.  
- **Управлять рисками**: анализ решений и их последствий позволяет вовремя выявлять потенциальные проблемы.  
- **Сохранять знания**: документирование процессов принятия решений помогает в будущем при разработке и поддержке системы.  

Вместе **ADR** и **ADL** создают структуру для принятия и отслеживания архитектурных решений, обеспечивая прозрачность, историческую последовательность и повышение качества проектирования системы.

---

### Использование ADR в CEAF

В ходе анализа процесса внедрения изменений в **CEAF** мы изучили отраслевые практики управления изменениями, включая подход через **ADR**. При этом были выявлены следующие недостатки **ADR**:

- Контекст рассматривается слишком узко. Для успешного внедрения изменений недостаточно определить проблему; необходимо выявить реальную мотивацию.  
- При принятии решений часто отсутствует понимание критериев оценки результата и факторов, которые могут на него повлиять.  
- Архитектурное решение описывается только с точки зрения технической реализации, без учёта необходимых шагов и ожидаемого конечного результата.  
- Последствия решений оцениваются поверхностно, без рассмотрения всех возможных аспектов.  
- Контроль исполнения **ADR** отсутствует, что затрудняет анализ успехов и неудач и требует использования дополнительных инструментов и процессов.  

С одной стороны, мы стремимся говорить на языке архитекторов, но с другой — нам нужно больше информации для управления изменениями. Поэтому за основу мы взяли **ADR** и расширили его.  

---

### Что такое TDR

Чтобы избежать путаницы в терминологии, мы назвали наш инструмент управления изменениями **TDR** — **Transformation Decision Record**.

В рамках **CEAF** **TDR** используется гораздо шире, чем просто средство фиксации архитектурных решений. Мы не только фиксируем важные решения, но и полностью управляем процессом изменений на всех этапах — от идеи до эксплуатации.  

Этот подход позволяет интегрировать управление архитектурными решениями в единую, непрерывную и целостную систему, что способствует лучшему контролю над процессом изменений и минимизирует риски. В результате мы получаем возможность управлять архитектурой в долгосрочной перспективе, сохраняя её гибкость и соответствие меняющимся бизнес-требованиям и техническим условиям.  

Более того, использование **TDR** позволяет нам накапливать и управлять знаниями, что приводит к качественно новому уровню **управления знаниями**.

---

### Преимущества использования TDR в CEAF

Применение **TDR** в рамках **CEAF** позволяет существенно сократить количество и сложность документации. Вместо множества разрозненных документов, таких как:

- **Бизнес-требования (БТ)**,  
- **Тактическая архитектура (ТАР)**,  
- **Техническое задание (ТЗ)**,  
- **Частное техническое задание (ЧТЗ)**,  

мы можем сосредоточиться на одном логичном и последовательном процессе управления архитектурными решениями. Это обеспечивает прозрачность, согласованность и поддержку всех заинтересованных сторон.

Преимущества использования **TDR** включают:

- **Снижение сложности**: ускорение принятия решений, повышение их качества и исключение дублирования документов.  
- **Исключение противоречий**: устранение параллельных процессов, ведущих к конфликтам в реализации.  
- **Сокращение издержек**: оптимизация затрат на управление процессами изменений.  
- **Достоверная информация**: возможность оперативной оценки текущего состояния для быстрой адаптации.
- **Управление знаниями**: возможность накапливать, оценивать и улучшать качество принимаемых решений.


### Концептуальная схема управления изменениями

!!! Сделать модель в yaml
![Концептуальная схема управления изменениями](@document/ceaf.adr.scheme.conceptual)

### Методология управления ADR

В данной методологии работы с ADR предполагается, что для каждого изменения должен быть сделан отдельный ADR. Если в процессе реализации изменений возникают различные развилки в т.ч. архитектурные, которые требуют проработки, то необходимо создавать новый ADR связанный с основным. При этом ADR, описанные варианты которых не подходят по каким-либо причинам,закрываются со статусом "Отклонён" (rejected). Для ADR в котором описан подходящий вариант устанавливается статус "Принят" (accepted) и все рассмотренные, но отклоненные варианты, должны быть указаны ссылками в разделе "Рассмотренные варианты".

#### Статусы ADR и их описание

Любой ADR имеет статусную модель описанную ниже:

1. **Черновик (Draft)**
   - **Описание**: Этот статус присваивается **ADR** на момент его первоначального создания. Когда архитектурное решение только начинает формироваться, оно находится на стадии черновика и ещё не прошло проверку или согласование. На этом этапе решение может быть в процессе разработки и обсуждения.

2. **Предложен (Proposed)**
   - **Описание**: Этот статус присваивается **ADR**, когда решение готово и передано на проверку. На стадии «Предложено» **ADR** подлежит анализу и обсуждению другими участниками команды или заинтересованными сторонами. Это момент, когда решение ещё не окончательно, но уже предлагается для утверждения.

3. **Принят (Accepted)**
   - **Описание**: Этот статус присваивается **ADR**, когда оно прошло проверку и его корректность была подтверждена всеми заинтересованными лицами. После того как решение было тщательно рассмотрено и одобрено, оно получает статус «Принято». Это означает, что архитектурное решение официально утверждено и будет применяться в проекте.

4. **Отклонён (Rejected)**
   - **Описание**: Этот статус присваивается **ADR**, когда оно было проверено, но отклонено по различным причинам. Возможные причины отклонения могут включать несоответствие требованиям, недостаточную проработанность или невозможность реализации в рамках текущей архитектуры проекта. Статус «Отклонено» означает, что данное решение не будет использовано, и требуется пересмотр альтернатив.

---

#### Документация по статусам ADR:

##### 1. Черновик (Draft)
   - **Когда применяется**: На этапе первоначального создания ADR, когда решение ещё не окончательно и подлежит доработке.
   - **Цель**: Сбор всех необходимых идей, подходов и предварительных обсуждений для дальнейшего анализа и уточнения.
   - **Действия**: Создание начальной версии документа, описание контекста, проблем и предварительных решений.

##### 2. Предложен (Proposed)
   - **Когда применяется**: Когда решение готово для проверки и обсуждения.
   - **Цель**: Принести решение на проверку и получить обратную связь от команды или заинтересованных сторон.
   - **Действия**: Передача документа на проверку, сбор замечаний и предложений, возможные корректировки.

##### 3. Принят (Accepted)
   - **Когда применяется**: Когда решение было проверено и подтверждено как корректное и соответствующее требованиям.
   - **Цель**: Заключительная стадия, когда решение утверждается для использования и внедрения в проект.
   - **Действия**: Утверждение решения и его интеграция в архитектуру проекта, дальнейшее использование в процессе разработки.

##### 4. Отклонён (Rejected)
   - **Когда применяется**: Когда решение было проверено, но отклонено по каким-либо причинам.
   - **Цель**: Ясно зафиксировать, что это решение не подходит и не будет использоваться.
   - **Действия**: Документирование причин отклонения, возможность для доработки или поиска альтернативного решения.


